<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Joki LifeAfter Pro - Mizuki Hiroshi Ch.</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #1a1a2e; /* Darker background */
      color: #e0e0e0; /* Lighter text */
    }
    h1, h2, h3, h4 {
      font-family: 'Orbitron', sans-serif; /* Sci-fi/gaming font for headings */
    }
    .btn-primary {
      background-image: linear-gradient(to right, #e94560, #ff6b6b);
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
    }
    .btn-primary:hover {
      background-image: linear-gradient(to right, #ff6b6b, #e94560);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(233, 69, 96, 0.6);
    }
    .btn-secondary {
      background-color: #3f72af;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(63, 114, 175, 0.4);
    }
    .btn-secondary:hover {
      background-color: #528ecc;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(63, 114, 175, 0.6);
    }
    .btn-success {
      background-color: #4CAF50;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
    }
    .btn-success:hover {
      background-color: #66BB6A;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.6);
    }
    .card {
      background-color: #2e2e4a; /* Slightly lighter card background */
      border: 1px solid #4a4a6a;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5);
    }
    input[type="text"], input[type="password"], input[type="email"], input[type="tel"], select, textarea {
      background-color: #1f1f3a;
      border: 1px solid #4a4a6a;
      color: #e0e0e0;
    }
    input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, input[type="tel"]:focus, select:focus, textarea:focus {
      border-color: #e94560;
      box-shadow: 0 0 0 2px rgba(233, 69, 96, 0.5);
    }
    .checkbox:checked {
      background-color: #e94560;
      border-color: #e94560;
    }
    .checkbox:focus {
      box-shadow: 0 0 0 2px rgba(233, 69, 96, 0.5);
    }
    .status-pending { color: #ffc107; } /* Yellow */
    .status-in-progress { color: #00bcd4; } /* Cyan */
    .status-completed { color: #4CAF50; } /* Green */

    /* Custom styles for dynamic banners */
    .dynamic-banner-item {
      background-color: #2e2e4a;
      border: 1px solid #4a4a6a;
      border-radius: 0.75rem; /* rounded-xl */
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .dynamic-banner-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5);
    }
    .dynamic-banner-image {
      width: 100%;
      height: 200px; /* Fixed height for consistency */
      object-fit: cover; /* Cover the area, cropping if necessary */
    }
  </style>
  <script type="text/javascript" src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
  <script type="module">
    // --- Firebase Setup (Updated to Compat v9 for Legacy Syntax) ---
    const firebaseConfig = {
      apiKey: "AIzaSyBdKELW2FNsL7H1zB8R765czcDPaSYybdg",
      authDomain: "atlantis-store.firebaseapp.com",
      databaseURL: "https://atlantis-store-default-rtdb.firebaseio.com",
      projectId: "atlantis-store",
      storageBucket: "atlantis-store.appspot.com",
      messagingSenderId: "566295949160",
      appId: "1:566295949160:web:3ad8956c753d2f05a5f0dd",
      measurementId: "G-F5RG09TFCK"
    };

    // Initialize Firebase only once
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const auth = firebase.auth();
    const db = firebase.database();
    const storage = firebase.storage();

    // --- UI Elements ---
    const loginRegisterSection = document.getElementById("loginRegisterSection");
    const orderSection = document.getElementById("orderSection");
    const userDashboardSection = document.getElementById("userDashboardSection");
    const loginForm = document.getElementById("loginForm");
    const registerForm = document.getElementById("registerForm");
    const orderForm = document.getElementById("orderForm");
    const userEmailDisplay = document.getElementById("userEmailDisplay");
    const logoutBtn = document.getElementById("logoutBtn");
    const userOrdersList = document.getElementById("userOrdersList");
    const toggleLoginRegisterBtn = document.getElementById("toggleLoginRegister");
    const loginCard = document.getElementById("loginCard");
    const registerCard = document.getElementById("registerCard");
    const dynamicBannerSection = document.getElementById("dynamicBannerSection"); // New element

    // New UI Elements for dynamic order form
    const fullServicePriceDiv = document.getElementById("fullServicePrice");
    const currentFullServicePriceSpan = document.getElementById("currentFullServicePrice");
    const perFloorDetailsDiv = document.getElementById("perFloorDetails");
    const statProofInput = document.getElementById("statProof");
    const statProofPreviewDiv = document.getElementById("statProofPreview");
    const floorTargetInput = document.getElementById("floorTarget");
    const floorCountInput = document.getElementById("floorCount");
    const proofOfPaymentDiv = document.getElementById("proofOfPaymentDiv"); // Tambahkan ini

    // New UI Elements for Roblox Joki
    const robloxJokiDetailsDiv = document.getElementById("robloxJokiDetails");
    const robloxUsernameInput = document.getElementById("robloxUsername");
    const mountainNameInput = document.getElementById("mountainName");
    const mountainQtyInput = document.getElementById("mountainQty");
    const robloxJokiPriceSpan = document.getElementById("robloxJokiPrice");
    const robloxJokiPaymentMethodsDiv = document.getElementById("robloxJokiPaymentMethods");
    const lifeAfterCredentialsDiv = document.getElementById("lifeAfterCredentials"); // New element for LifeAfter credentials


    // --- Toggle Login/Register View ---
    let isLoginView = true;
    if (toggleLoginRegisterBtn) {
        toggleLoginRegisterBtn.addEventListener('click', () => {
            isLoginView = !isLoginView;
            if (isLoginView) {
                loginCard.classList.remove('hidden');
                registerCard.classList.add('hidden');
                toggleLoginRegisterBtn.textContent = "Belum punya akun? Registrasi";
            } else {
                loginCard.classList.add('hidden');
                registerCard.classList.remove('hidden');
                toggleLoginRegisterBtn.textContent = "Sudah punya akun? Login";
            }
        });
    }


    // --- Auth State Listener ---
    auth.onAuthStateChanged((user) => {
      if (user) {
        // User is signed in
        loginRegisterSection.classList.add("hidden");
        orderSection.classList.remove("hidden");
        userDashboardSection.classList.remove("hidden");
        userEmailDisplay.textContent = user.email;
        fetchUserOrders(user.uid); // Fetch and display user's orders
        updateOrderDetails(); // Call this to set initial price and form visibility
      } else {
        // User is signed out
        loginRegisterSection.classList.remove("hidden");
        orderSection.classList.add("hidden");
        userDashboardSection.classList.add("hidden");
        userEmailDisplay.textContent = "";
        userOrdersList.innerHTML = ""; // Clear orders
        // Ensure login form is visible by default when logged out
        loginCard.classList.remove('hidden');
        registerCard.classList.add('hidden');
        if (toggleLoginRegisterBtn) {
            toggleLoginRegisterBtn.textContent = "Belum punya akun? Registrasi";
            isLoginView = true;
        }
        // Hide specific order details when logged out
        fullServicePriceDiv.classList.add('hidden');
        perFloorDetailsDiv.classList.add('hidden');
        robloxJokiDetailsDiv.classList.add('hidden'); // Hide Roblox details
        proofOfPaymentDiv.classList.add('hidden'); // Sembunyikan juga bukti pembayaran saat logout
        lifeAfterCredentialsDiv.classList.add('hidden'); // Hide LifeAfter credentials
      }
    });

    // --- Handle Login ---
    async function handleLogin(e) {
      e.preventDefault();
      const email = loginForm.loginEmail.value;
      const password = loginForm.loginPassword.value;

      if (!email || !password) {
        alert("Email dan password harus diisi.");
        return;
      }

      try {
        await auth.signInWithEmailAndPassword(email, password);
        alert("Login berhasil! Selamat datang kembali.");
        loginForm.reset();
      } catch (error) {
        console.error("Login gagal:", error);
        alert("Login gagal: " + error.message);
      }
    }

    // --- Handle Registration ---
    async function handleRegister(e) {
      e.preventDefault();
      const email = registerForm.registerEmail.value;
      const password = registerForm.registerPassword.value;

      if (!email || !password) {
        alert("Email dan password harus diisi.");
        return;
      }
      if (password.length < 6) {
        alert("Password harus minimal 6 karakter.");
        return;
      }

      try {
        await auth.createUserWithEmailAndPassword(email, password);
        alert("Registrasi berhasil! Silakan login dengan akun Anda.");
        registerForm.reset();
        // Automatically switch to login view after successful registration
        loginCard.classList.remove('hidden');
        registerCard.classList.add('hidden');
        if (toggleLoginRegisterBtn) {
            toggleLoginRegisterBtn.textContent = "Belum punya akun? Registrasi";
            isLoginView = true;
        }
      } catch (error) {
        console.error("Registrasi gagal:", error);
        alert("Registrasi gagal: " + error.message);
      }
    }

    // --- Handle Logout ---
    async function handleLogout() {
      try {
        await auth.signOut();
        alert("Anda telah logout.");
      } catch (error) {
        console.error("Logout gagal:", error);
        alert("Logout gagal: " + error.message);
      }
    }

    // --- Function to update order details based on selection and user history ---
    async function updateOrderDetails() {
      const user = auth.currentUser;
      const jenis = document.getElementById("jenis").value;

      // Reset visibility for all specific service details
      fullServicePriceDiv.classList.add('hidden');
      perFloorDetailsDiv.classList.add('hidden');
      robloxJokiDetailsDiv.classList.add('hidden');
      proofOfPaymentDiv.classList.add('hidden'); // Sembunyikan secara default
      lifeAfterCredentialsDiv.classList.add('hidden'); // Sembunyikan LifeAfter credentials secara default

      // Reset required attributes for all specific inputs
      statProofInput.removeAttribute('required');
      floorTargetInput.removeAttribute('required');
      floorCountInput.removeAttribute('required');
      robloxUsernameInput.removeAttribute('required');
      mountainNameInput.removeAttribute('required');
      mountainQtyInput.removeAttribute('required');
      document.getElementById("proof").removeAttribute('required'); // Hapus required dari bukti pembayaran secara default
      document.getElementById("code").removeAttribute('required'); // Hapus required dari transfer code
      document.getElementById("pass").removeAttribute('required'); // Hapus required dari password

      if (jenis === 'full') {
        fullServicePriceDiv.classList.remove('hidden');
        proofOfPaymentDiv.classList.remove('hidden'); // Tampilkan bukti pembayaran
        lifeAfterCredentialsDiv.classList.remove('hidden'); // Tampilkan LifeAfter credentials
        document.getElementById("proof").setAttribute('required', 'required'); // Set required untuk bukti pembayaran
        document.getElementById("code").setAttribute('required', 'required'); // Set required untuk transfer code
        document.getElementById("pass").setAttribute('required', 'required'); // Set required untuk password

        let price = 250000; // Default price for subsequent orders

        if (user) {
          const snapshot = await db.ref('orders').orderByChild('userId').equalTo(user.uid).once('value');
          const userOrders = snapshot.val();
          let hasFullServiceOrder = false;
          if (userOrders) {
            for (const orderId in userOrders) {
              if (userOrders[orderId].jenis === 'full') {
                hasFullServiceOrder = true;
                break;
              }
            }
          }
          if (!hasFullServiceOrder) {
            price = 150000; // First-time full service order
          }
        }
        currentFullServicePriceSpan.textContent = `Rp ${price.toLocaleString('id-ID')}`;
      } else if (jenis === 'floor') {
        perFloorDetailsDiv.classList.remove('hidden');
        lifeAfterCredentialsDiv.classList.remove('hidden'); // Tampilkan LifeAfter credentials
        statProofInput.setAttribute('required', 'required');
        floorTargetInput.setAttribute('required', 'required');
        floorCountInput.setAttribute('required', 'required');
        document.getElementById("code").setAttribute('required', 'required'); // Set required untuk transfer code
        document.getElementById("pass").setAttribute('required', 'required'); // Set required untuk password
        // Bukti pembayaran tetap tersembunyi dan tidak required
      } else if (jenis === 'roblox_mountain') {
        robloxJokiDetailsDiv.classList.remove('hidden');
        proofOfPaymentDiv.classList.remove('hidden'); // Tampilkan bukti pembayaran
        document.getElementById("proof").setAttribute('required', 'required'); // Set required untuk bukti pembayaran

        robloxUsernameInput.setAttribute('required', 'required');
        mountainNameInput.setAttribute('required', 'required');
        mountainQtyInput.setAttribute('required', 'required');

        // Update price dynamically for Roblox Joki
        const robloxPricePerMountain = 5000;
        const qty = parseInt(mountainQtyInput.value) || 1;
        robloxJokiPriceSpan.textContent = `Rp ${(robloxPricePerMountain * qty).toLocaleString('id-ID')}`;
      }
    }

    // Event listener for mountain quantity change
    if (mountainQtyInput) {
      mountainQtyInput.addEventListener('input', () => {
        const jenis = document.getElementById("jenis").value;
        if (jenis === 'roblox_mountain') {
          const robloxPricePerMountain = 5000;
          const qty = parseInt(mountainQtyInput.value) || 1;
          robloxJokiPriceSpan.textContent = `Rp ${(robloxPricePerMountain * qty).toLocaleString('id-ID')}`;
        }
      });
    }


    // --- Handle Order Form with Screenshot Upload ---
    async function handleOrder(e) {
      e.preventDefault();
      const user = auth.currentUser;
      if (!user) {
        alert("Harap login dulu untuk membuat pesanan.");
        return;
      }

      const jenis = document.getElementById("jenis").value;
      const device = document.getElementById("device").value;
      const whatsapp = document.getElementById("whatsapp").value;
      const agree = document.getElementById("agree").checked;

      // LifeAfter specific credentials
      const code = document.getElementById("code").value;
      const pass = document.getElementById("pass").value;

      if (!jenis || !device || !whatsapp) {
        alert("Semua kolom wajib diisi.");
        return;
      }
      if (!agree) {
        alert("Harap setujui rules sebelum submit order.");
        return;
      }

      // Basic WhatsApp number validation (starts with 62, min 10 digits)
      if (!whatsapp.match(/^62\d{9,}$/)) {
        alert("Format nomor WhatsApp tidak valid. Gunakan format 62xxxxxxxxxx (tanpa +).");
        return;
      }

      // Show loading indicator (optional)
      const submitButton = orderForm.querySelector('button[type="submit"]');
      submitButton.disabled = true;
      submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Mengirim Order...';

      let proofURL = null;
      let statProofURL = null;
      let orderPrice = 0; // Initialize order price

      try {
        // Handle proof of payment for 'full' service and 'roblox_mountain'
        if (jenis === 'full' || jenis === 'roblox_mountain') {
          const proofFile = document.getElementById("proof").files[0];
          if (!proofFile) {
            alert("Harap upload screenshot bukti pembayaran.");
            return;
          }
          const storageRef = storage.ref().child(`proofs/${user.uid}_${Date.now()}_${proofFile.name}`);
          const uploadTask = storageRef.put(proofFile);
          await new Promise((resolve, reject) => {
            uploadTask.on('state_changed', () => {}, (error) => reject(new Error("Gagal upload bukti pembayaran.")), resolve);
          });
          proofURL = await uploadTask.snapshot.ref.getDownloadURL();
        }

        // Determine price and specific data based on service type
        const orderData = {
          userId: user.uid,
          nama: user.displayName || user.email.split('@')[0], // Use email prefix if no display name
          email: user.email,
          jenis,
          device,
          whatsapp: whatsapp,
          waktu: firebase.database.ServerValue.TIMESTAMP,
          status: "pending",
          proofURL: proofURL // Proof URL is common for paid services
        };

        if (jenis === 'full') {
          // Validate LifeAfter credentials
          if (!code || !pass) {
            alert("Transfer Code Akun dan Password Akun wajib diisi untuk Death High Full Service.");
            return;
          }

          // Determine price for full service
          const snapshot = await db.ref('orders').orderByChild('userId').equalTo(user.uid).once('value');
          const userOrders = snapshot.val();
          let hasFullServiceOrder = false;
          if (userOrders) {
            for (const orderId in userOrders) {
              if (userOrders[orderId].jenis === 'full') {
                hasFullServiceOrder = true;
                break;
              }
            }
          }
          orderPrice = hasFullServiceOrder ? 250000 : 150000;
          orderData.price = orderPrice;
          orderData.transferCode = code; // LifeAfter specific
          orderData.password = pass; // LifeAfter specific
        } else if (jenis === 'floor') {
          // Validate LifeAfter credentials
          if (!code || !pass) {
            alert("Transfer Code Akun dan Password Akun wajib diisi untuk Death High Per Floor.");
            return;
          }

          const statProofFile = document.getElementById("statProof").files[0];
          const floorTarget = floorTargetInput.value;
          const floorCount = floorCountInput.value;

          if (!statProofFile || !floorTarget || !floorCount) {
            alert("Harap lengkapi semua detail untuk Death High Per Floor (Screenshot Stat Akun, Target Floor, Jumlah Floor).");
            return;
          }

          const statStorageRef = storage.ref().child(`stat_proofs/${user.uid}_${Date.now()}_${statProofFile.name}`);
          const statUploadTask = statStorageRef.put(statProofFile);
          await new Promise((resolve, reject) => {
            statUploadTask.on('state_changed', () => {}, (error) => reject(new Error("Gagal upload screenshot stat akun.")), resolve);
          });
          statProofURL = await statUploadTask.snapshot.ref.getDownloadURL();

          orderData.statProofURL = statProofURL;
          orderData.floorTarget = floorTarget;
          orderData.floorCount = floorCount;
          orderData.priceInfo = "Harga akan diinformasikan via WhatsApp"; // No fixed price
          orderData.transferCode = code; // LifeAfter specific
          orderData.password = pass; // LifeAfter specific
        } else if (jenis === 'roblox_mountain') {
          const robloxUsername = robloxUsernameInput.value;
          const mountainName = mountainNameInput.value;
          const mountainQty = parseInt(mountainQtyInput.value) || 1;
          const robloxPricePerMountain = 5000;

          if (!robloxUsername || !mountainName || !mountainQty) {
            alert("Harap lengkapi semua detail untuk Joki Gendong Naik Gunung Roblox (Username Roblox, Nama Gunung, Jumlah Gunung).");
            return;
          }
          orderPrice = robloxPricePerMountain * mountainQty;

          orderData.robloxUsername = robloxUsername;
          orderData.mountainName = mountainName;
          orderData.mountainQty = mountainQty;
          orderData.price = orderPrice;
          // For Roblox, 'code' and 'pass' are not directly used as account credentials
          // They are not added to orderData for this service type
        }

        const newOrderRef = db.ref('orders').push();
        await newOrderRef.set(orderData);

        alert("Order berhasil dikirim! Kami akan konfirmasi segera melalui WhatsApp Anda.");
        orderForm.reset();
        document.getElementById("proofPreview").innerHTML = ""; // Clear preview
        document.getElementById("statProofPreview").innerHTML = ""; // Clear stat proof preview
        fetchUserOrders(user.uid); // Refresh user's orders
        updateOrderDetails(); // Re-evaluate prices/visibility
      } catch (error) {
        console.error('Order submission failed:', error);
        alert("Gagal mengirim order: " + error.message);
      } finally {
        submitButton.disabled = false;
        submitButton.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Kirim Order';
      }
    }

    // --- Fetch and Display User Orders ---
    function fetchUserOrders(userId) {
      userOrdersList.innerHTML = '<p class="text-gray-400 text-center py-4"><i class="fas fa-spinner fa-spin mr-2"></i>Memuat pesanan...</p>';
      db.ref('orders').orderByChild('userId').equalTo(userId).on('value', (snapshot) => {
        if (snapshot.exists()) {
          userOrdersList.innerHTML = ''; // Clear previous list
          const orders = [];
          snapshot.forEach((childSnapshot) => {
            orders.push({ id: childSnapshot.key, ...childSnapshot.val() });
          });

          // Sort orders by timestamp, newest first
          orders.sort((a, b) => b.waktu - a.waktu);

          orders.forEach((order) => {
            const orderElement = document.createElement('div');
            orderElement.className = 'card p-5 rounded-xl mb-4';
            let statusClass = '';
            switch (order.status) {
              case 'pending': statusClass = 'status-pending'; break;
              case 'in progress': statusClass = 'status-in-progress'; break;
              case 'completed': statusClass = 'status-completed'; break;
              default: statusClass = 'text-gray-400';
            }

            let orderDetailsHtml = '';
            if (order.jenis === 'full') {
              orderDetailsHtml = `
                <p class="mb-1"><i class="fas fa-dollar-sign text-blue-400 mr-2"></i>Harga: <span class="font-medium text-green-400">Rp ${order.price ? order.price.toLocaleString('id-ID') : 'N/A'}</span></p>
                ${order.proofURL ? `<a href="${order.proofURL}" target="_blank" class="text-red-400 hover:underline text-sm mt-3 block"><i class="fas fa-image mr-1"></i>Lihat Bukti Pembayaran</a>` : ''}
              `;
            } else if (order.jenis === 'floor') {
              orderDetailsHtml = `
                <p class="mb-1"><i class="fas fa-layer-group text-blue-400 mr-2"></i>Target Floor: <span class="font-medium">${order.floorTarget || 'N/A'}</span></p>
                <p class="mb-1"><i class="fas fa-hashtag text-blue-400 mr-2"></i>Jumlah Floor: <span class="font-medium">${order.floorCount || 'N/A'}</span></p>
                <p class="mb-1"><i class="fas fa-dollar-sign text-blue-400 mr-2"></i>Harga: <span class="font-medium text-yellow-400">${order.priceInfo || 'Akan diinformasikan via WhatsApp'}</span></p>
                ${order.statProofURL ? `<a href="${order.statProofURL}" target="_blank" class="text-red-400 hover:underline text-sm mt-3 block"><i class="fas fa-chart-bar mr-1"></i>Lihat Screenshot Stat Akun</a>` : ''}
              `;
            } else if (order.jenis === 'roblox_mountain') {
                orderDetailsHtml = `
                    <p class="mb-1"><i class="fab fa-roblox text-blue-400 mr-2"></i>Username Roblox: <span class="font-medium">${order.robloxUsername || 'N/A'}</span></p>
                    <p class="mb-1"><i class="fas fa-mountain text-blue-400 mr-2"></i>Nama Gunung: <span class="font-medium">${order.mountainName || 'N/A'}</span></p>
                    <p class="mb-1"><i class="fas fa-hashtag text-blue-400 mr-2"></i>Jumlah Gunung: <span class="font-medium">${order.mountainQty || 'N/A'}</span></p>
                    <p class="mb-1"><i class="fas fa-dollar-sign text-blue-400 mr-2"></i>Harga: <span class="font-medium text-green-400">Rp ${order.price ? order.price.toLocaleString('id-ID') : 'N/A'}</span></p>
                    ${order.proofURL ? `<a href="${order.proofURL}" target="_blank" class="text-red-400 hover:underline text-sm mt-3 block"><i class="fas fa-image mr-1"></i>Lihat Bukti Pembayaran</a>` : ''}
                `;
            }


            orderElement.innerHTML = `
              <div class="flex justify-between items-center mb-3 border-b border-gray-600 pb-2">
                <h5 class="text-lg font-bold text-red-400">Order ID: <span class="text-gray-300 text-sm">${order.id}</span></h5>
                <span class="text-sm font-semibold ${statusClass}">${order.status.toUpperCase()}</span>
              </div>
              <p class="mb-1"><i class="fas fa-gamepad text-blue-400 mr-2"></i>Jenis Joki: <span class="font-medium">${order.jenis === 'full' ? 'Death High Full Service' : order.jenis === 'floor' ? 'Death High Per Floor' : 'Joki Gendong Naik Gunung Roblox'}</span></p>
              <p class="mb-1"><i class="fas fa-mobile-alt text-blue-400 mr-2"></i>Device: <span class="font-medium">${order.device}</span></p>
              <p class="mb-1"><i class="fab fa-whatsapp text-blue-400 mr-2"></i>WhatsApp: <span class="font-medium">${order.whatsapp}</span></p>
              ${orderDetailsHtml}
              <p class="text-sm text-gray-500 mt-2">Waktu Order: ${new Date(order.waktu).toLocaleString()}</p>
            `;
            userOrdersList.appendChild(orderElement);
          });
        } else {
          userOrdersList.innerHTML = '<p class="text-gray-400 text-center py-4">Anda belum memiliki pesanan.</p>';
        }
      }, (error) => {
        console.error("Error fetching user orders:", error);
        userOrdersList.innerHTML = '<p class="text-red-500 text-center py-4">Gagal memuat pesanan. Silakan coba lagi.</p>';
      });
    }

    // Preview screenshot on select
    function previewProof(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById("proofPreview").innerHTML = `<img src="${e.target.result}" alt="Preview Bukti Pembayaran" class="max-w-full h-48 object-cover rounded-lg mt-2 border border-gray-600 shadow-md">`;
        };
        reader.readAsDataURL(file);
      } else {
        document.getElementById("proofPreview").innerHTML = "";
      }
    }

    // Preview stat proof on select
    function previewStatProof(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById("statProofPreview").innerHTML = `<img src="${e.target.result}" alt="Preview Stat Akun" class="max-w-full h-48 object-cover rounded-lg mt-2 border border-gray-600 shadow-md">`;
        };
        reader.readAsDataURL(file);
      } else {
        document.getElementById("statProofPreview").innerHTML = "";
      }
    }

    // --- Fetch and Display Dynamic Banners ---
    function fetchAndDisplayBanners() {
      dynamicBannerSection.innerHTML = '<p class="text-gray-400 text-center py-4"><i class="fas fa-spinner fa-spin mr-2"></i>Memuat promosi...</p>';
      db.ref('banners').on('value', (snapshot) => {
        if (snapshot.exists()) {
          dynamicBannerSection.innerHTML = `
            <h3 class="text-2xl md:text-4xl font-bold mb-8 text-center text-[#e94560] flex items-center justify-center space-x-3">
              <i class="fas fa-bullhorn"></i>
              <span>Promo & Event Terbaru</span>
            </h3>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="bannersContainer"></div>
          `;
          const bannersContainer = document.getElementById("bannersContainer");
          bannersContainer.innerHTML = ''; // Clear previous banners

          const banners = [];
          snapshot.forEach((childSnapshot) => {
            banners.push({ id: childSnapshot.key, ...childSnapshot.val() });
          });

          banners.sort((a, b) => b.timestamp - a.timestamp); // Newest first

          banners.forEach((banner) => {
            const bannerElement = document.createElement('div');
            bannerElement.className = 'dynamic-banner-item';
            bannerElement.innerHTML = `
              <a href="${banner.link || '#'}" target="${banner.link ? '_blank' : '_self'}" class="block">
                <img src="${banner.imageUrl}" alt="${banner.title}" class="dynamic-banner-image">
                <div class="p-4">
                  <h4 class="text-xl font-semibold text-white mb-2">${banner.title}</h4>
                  ${banner.description ? `<p class="text-gray-400 text-sm">${banner.description}</p>` : ''}
                </div>
              </a>
            `;
            bannersContainer.appendChild(bannerElement);
          });
        } else {
          dynamicBannerSection.innerHTML = ''; // Hide section if no banners
        }
      }, (error) => {
        console.error("Error fetching dynamic banners:", error);
        dynamicBannerSection.innerHTML = '<p class="text-red-500 text-center py-4">Gagal memuat promosi. Silakan coba lagi.</p>';
      });
    }

    // Call fetchAndDisplayBanners on page load
    document.addEventListener('DOMContentLoaded', fetchAndDisplayBanners);


    // Expose functions to the global scope
    window.handleLogin = handleLogin;
    window.handleRegister = handleRegister;
    window.handleLogout = handleLogout;
    window.handleOrder = handleOrder;
    window.previewProof = previewProof;
    window.previewStatProof = previewStatProof; // Expose new preview function
    window.updateOrderDetails = updateOrderDetails; // Expose new update function
  </script>
</head>
<body class="flex flex-col min-h-screen">
  <!-- Header -->
  <header class="bg-gradient-to-r from-[#1a1a2e] to-[#0f0f1a] p-4 md:p-6 text-center shadow-2xl border-b-2 border-[#e94560]">
    <div class="flex justify-center items-center space-x-3 mb-2">
      <i class="fas fa-gamepad text-4xl text-[#e94560]"></i>
      <h1 class="text-3xl md:text-5xl font-bold text-white tracking-wide">Joki LifeAfter <span class="text-[#e94560]">PRO</span></h1>
    </div>
    <p class="text-sm md:text-base text-gray-400">Mizuki Hiroshi Ch. <span class="text-[#e94560]">水木広氏</span> - Your Elite Gaming Partner</p>
  </header>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto p-6 md:p-8">

    <!-- Dynamic Banner Section (New) -->
    <section id="dynamicBannerSection" class="mb-12">
      <!-- Dynamic banners will be loaded here by JavaScript -->
    </section>

    <!-- Banner Promo (Existing, can be replaced by dynamic banners if preferred) -->
    <section class="p-6 md:p-8 text-center bg-gradient-to-r from-[#e94560] to-[#ff6b6b] shadow-xl rounded-xl mb-12 transform hover:scale-105 transition-transform duration-300">
      <div class="flex justify-center items-center space-x-3 mb-3">
        <i class="fas fa-fire text-3xl text-white animate-pulse"></i>
        <h2 class="text-2xl md:text-4xl font-bold text-white">PROMO SPESIAL!</h2>
      </div>
      <p class="text-lg md:text-2xl text-white mb-4">Death High Full Service hanya <span class="line-through text-gray-200">Rp 250.000</span> jadi <span class="font-bold text-yellow-300 text-3xl">Rp 150.000</span></p>
      <button onclick="window.open('https://wa.me/6289634568406', '_blank')" class="btn-primary text-white px-8 py-3 rounded-full font-semibold text-lg shadow-lg">
        <i class="fab fa-whatsapp mr-2"></i>Hubungi Kami Sekarang!
      </button>
    </section>

    <!-- Info Layanan -->
    <section class="mb-12">
      <h3 class="text-2xl md:text-4xl font-bold mb-8 text-center text-[#e94560] flex items-center justify-center space-x-3">
        <i class="fas fa-cogs"></i>
        <span>Layanan Joki Profesional</span>
      </h3>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-5xl mx-auto">
        <div class="card p-8 rounded-xl hover:shadow-2xl">
          <i class="fas fa-crown text-4xl text-yellow-400 mb-4"></i>
          <h4 class="text-2xl font-semibold mb-3 text-white">Death High Full Service</h4>
          <p class="text-gray-400 mb-4">Pengerjaan lengkap selama 1 bulan penuh untuk performa maksimal.</p>
          <p class="text-3xl font-bold text-green-400">Rp 150.000 <span class="text-base font-normal text-gray-500">(Promo Perdana)</span></p>
          <span class="text-sm text-gray-500 block mt-2 line-through">Normal: Rp 250.000</span>
        </div>
        <div class="card p-8 rounded-xl hover:shadow-2xl">
          <i class="fas fa-layer-group text-4xl text-blue-400 mb-4"></i>
          <h4 class="text-2xl font-semibold mb-3 text-white">Death High Per Floor</h4>
          <p class="text-gray-400 mb-4">Fleksibel, bayar sesuai lantai yang ingin diselesaikan. Cocok untuk kebutuhan spesifik.</p>
          <p class="text-2xl font-bold text-green-400">Harga Negosiasi</p>
          <button onclick="window.open('https://wa.me/6289634568406', '_blank')" class="btn-success text-white px-6 py-2 rounded-full font-semibold mt-4">
            <i class="fab fa-whatsapp mr-2"></i>Konsultasi Harga
          </button>
        </div>
        <div class="card p-8 rounded-xl hover:shadow-2xl">
            <i class="fab fa-roblox text-4xl text-purple-400 mb-4"></i>
            <h4 class="text-2xl font-semibold mb-3 text-white">Joki Gendong Naik Gunung Roblox</h4>
            <p class="text-gray-400 mb-4">Bantu kamu mencapai puncak gunung di Roblox dengan cepat dan aman.</p>
            <p class="text-3xl font-bold text-green-400">Rp 5.000 <span class="text-base font-normal text-gray-500">/ gunung</span></p>
            <button onclick="window.open('https://wa.me/6289634568406', '_blank')" class="btn-primary text-white px-6 py-2 rounded-full font-semibold mt-4">
                <i class="fab fa-whatsapp mr-2"></i>Pesan Sekarang!
            </button>
        </div>
      </div>
    </section>

    <!-- Login/Register Section -->
    <section id="loginRegisterSection" class="max-w-2xl mx-auto mb-12">
      <h3 class="text-2xl md:text-4xl font-bold mb-8 text-center text-[#e94560] flex items-center justify-center space-x-3">
        <i class="fas fa-user-shield"></i>
        <span>Akses Jasa Joki</span>
      </h3>
      <div class="card p-8 rounded-xl">
        <div id="loginCard">
          <h4 class="text-xl font-semibold mb-6 text-center text-white">Login ke Akun Anda</h4>
          <form id="loginForm" onsubmit="handleLogin(event)" class="space-y-5">
            <div>
              <label for="loginEmail" class="block text-sm font-medium mb-2 text-gray-300">Email</label>
              <input type="email" id="loginEmail" class="w-full p-3 rounded-lg focus:outline-none" required placeholder="Masukkan email Anda">
            </div>
            <div>
              <label for="loginPassword" class="block text-sm font-medium mb-2 text-gray-300">Password</label>
              <input type="password" id="loginPassword" class="w-full p-3 rounded-lg focus:outline-none" required placeholder="Masukkan password Anda">
            </div>
            <button type="submit" class="btn-primary w-full text-white px-6 py-3 rounded-lg font-bold text-lg">
              <i class="fas fa-sign-in-alt mr-2"></i>Login
            </button>
          </form>
        </div>
        <div id="registerCard" class="hidden">
          <h4 class="text-xl font-semibold mb-6 text-center text-white">Buat Akun Baru</h4>
          <form id="registerForm" onsubmit="handleRegister(event)" class="space-y-5">
            <div>
              <label for="registerEmail" class="block text-sm font-medium mb-2 text-gray-300">Email</label>
              <input type="email" id="registerEmail" class="w-full p-3 rounded-lg focus:outline-none" required placeholder="Masukkan email Anda">
            </div>
            <div>
              <label for="registerPassword" class="block text-sm font-medium mb-2 text-gray-300">Password</label>
              <input type="password" id="registerPassword" class="w-full p-3 rounded-lg focus:outline-none" required placeholder="Buat password (min. 6 karakter)">
            </div>
            <button type="submit" class="btn-secondary w-full text-white px-6 py-3 rounded-lg font-bold text-lg">
              <i class="fas fa-user-plus mr-2"></i>Registrasi
            </button>
          </form>
        </div>
        <button id="toggleLoginRegister" class="mt-6 w-full text-center text-gray-400 hover:text-[#e94560] transition-colors duration-200 text-sm">
          Belum punya akun? Registrasi
        </button>
      </div>
    </section>

    <!-- User Dashboard Section (Hidden until logged in) -->
    <section id="userDashboardSection" class="hidden max-w-4xl mx-auto mb-12">
      <div class="card p-8 rounded-xl">
        <div class="flex flex-col md:flex-row justify-between items-center mb-6 pb-4 border-b border-gray-600">
          <h3 class="text-2xl md:text-3xl font-bold text-[#e94560] flex items-center space-x-3 mb-4 md:mb-0">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard Pengguna</span>
          </h3>
          <div class="flex items-center space-x-4">
            <span class="text-gray-300 text-lg">Halo, <span id="userEmailDisplay" class="font-semibold text-red-300"></span>!</span>
            <button id="logoutBtn" onclick="handleLogout()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition-colors duration-300">
              <i class="fas fa-sign-out-alt mr-1"></i>Logout
            </button>
          </div>
        </div>

        <h4 class="text-xl font-bold mb-5 text-red-300 flex items-center space-x-2">
          <i class="fas fa-history"></i>
          <span>Riwayat Pesanan Anda</span>
        </h4>
        <div id="userOrdersList" class="space-y-4">
          <!-- User orders will be loaded here -->
          <p class="text-gray-400 text-center py-4"><i class="fas fa-spinner fa-spin mr-2"></i>Memuat pesanan...</p>
        </div>
      </div>
    </section>

    <!-- Form Order (Hidden until logged in) -->
    <section id="orderSection" class="hidden max-w-2xl mx-auto mb-12">
      <h3 class="text-2xl md:text-4xl font-bold mb-8 text-center text-[#e94560] flex items-center justify-center space-x-3">
        <i class="fas fa-file-alt"></i>
        <span>Formulir Pemesanan Joki</span>
      </h3>
      <form id="orderForm" onsubmit="handleOrder(event)" class="card p-8 rounded-xl space-y-6">
        <div>
          <label for="jenis" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
            <i class="fas fa-list text-[#e94560]"></i>
            <span>Jenis Joki</span>
          </label>
          <select id="jenis" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" required onchange="updateOrderDetails()">
            <option value="full">Death High Full Service</option>
            <option value="floor">Death High Per Floor</option>
            <option value="roblox_mountain">Joki Gendong Naik Gunung Roblox</option>
          </select>
        </div>

        <!-- Nominal Harga untuk Full Service -->
        <div id="fullServicePrice" class="hidden">
          <p class="text-lg font-bold text-white mb-2">Biaya Joki:</p>
          <p id="currentFullServicePrice" class="text-3xl font-bold text-green-400"></p>
          <p class="text-sm text-gray-500 mt-1">Harga akan disesuaikan berdasarkan riwayat order Anda.</p>

          <!-- New Payment Methods Section -->
          <div class="mt-6 p-4 bg-[#1f1f3a] rounded-lg border border-[#4a4a6a]">
            <h5 class="text-xl font-bold text-white mb-3 flex items-center space-x-2">
              <i class="fas fa-wallet text-green-400"></i>
              <span>Metode Pembayaran</span>
            </h5>
            <ul class="space-y-2 text-gray-300">
              <li class="flex items-center space-x-2">
                <i class="fas fa-money-bill-wave text-green-400"></i>
                <span>DANA: <span class="font-semibold">089634568406</span></span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-money-bill-wave text-green-400"></i>
                <span>Gopay: <span class="font-semibold">089634568406</span></span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-money-bill-wave text-green-400"></i>
                <span>OVO: <span class="font-semibold">089634568406</span></span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-university text-blue-400"></i>
                <span>BRI: <span class="font-semibold">079801006323504</span></span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-university text-blue-400"></i>
                <span>BCA: <span class="font-semibold">4460995146</span></span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-hand-holding-heart text-red-400"></i>
                <span>Trakteer: <a href="https://trakteer.id/itshiro16/tip" target="_blank" class="text-red-400 hover:underline font-semibold">trakteer.id/itshiro16/tip</a></span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-hand-holding-usd text-yellow-400"></i>
                <span>Saweria: <a href="https://saweria.co/mizukikun" target="_blank" class="text-yellow-400 hover:underline font-semibold">saweria.co/mizukikun</a></span>
              </li>
            </ul>
            <p class="text-sm text-gray-500 mt-3">Mohon lakukan pembayaran sebelum mengunggah bukti pembayaran.</p>
          </div>
          <!-- End New Payment Methods Section -->

        </div>

        <!-- Input Spesifik untuk Per Floor -->
        <div id="perFloorDetails" class="hidden space-y-6">
          <p class="text-lg font-bold text-white mb-2">Detail Death High Per Floor:</p>
          <div>
            <label for="statProof" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
              <i class="fas fa-chart-bar text-[#e94560]"></i>
              <span>Screenshot Stat Akun</span>
            </label>
            <input type="file" id="statProof" accept="image/*" class="w-full p-3 rounded-lg focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[#e94560] file:text-white hover:file:bg-[#ff6b6b] transition-all duration-200" onchange="previewStatProof(event)">
            <div id="statProofPreview" class="mt-4 flex justify-center"></div>
          </div>
          <div>
            <label for="floorTarget" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
              <i class="fas fa-layer-group text-[#e94560]"></i>
              <span>Floor yang akan dikerjakan (Cth: F100, F120)</span>
            </label>
            <input type="text" id="floorTarget" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" placeholder="Masukkan target floor">
          </div>
          <div>
            <label for="floorCount" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
              <i class="fas fa-hashtag text-[#e94560]"></i>
              <span>Jumlah Floor</span>
            </label>
            <input type="number" id="floorCount" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" min="1" placeholder="Masukkan jumlah floor">
          </div>
          <p class="text-sm text-gray-500 mt-1">Harga joki Death High Per Floor akan diinformasikan melalui WhatsApp setelah kami menganalisis detail order Anda.</p>
        </div>

        <!-- Input Spesifik untuk Joki Gendong Naik Gunung Roblox -->
        <div id="robloxJokiDetails" class="hidden space-y-6">
            <p class="text-lg font-bold text-white mb-2">Detail Joki Gendong Naik Gunung Roblox:</p>
            <div>
                <label for="robloxUsername" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
                    <i class="fab fa-roblox text-[#e94560]"></i>
                    <span>Username Roblox</span>
                </label>
                <input type="text" id="robloxUsername" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" placeholder="Contoh: HiroGamer123">
            </div>
            <div>
                <label for="mountainName" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
                    <i class="fas fa-mountain text-[#e94560]"></i>
                    <span>Nama Gunung</span>
                </label>
                <input type="text" id="mountainName" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" placeholder="Contoh: Gunung Sakura">
            </div>
            <div>
                <label for="mountainQty" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
                    <i class="fas fa-hashtag text-[#e94560]"></i>
                    <span>Jumlah Gunung</span>
                </label>
                <input type="number" id="mountainQty" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" min="1" value="1" oninput="updateOrderDetails()">
            </div>
            <p class="text-lg font-bold text-white mb-2">Total Biaya:</p>
            <p id="robloxJokiPrice" class="text-3xl font-bold text-green-400">Rp 5.000</p>
            <p class="text-sm text-gray-500 mt-1">Harga: Rp 5.000 / gunung.</p>

            <!-- Payment Methods for Roblox Joki (can be same as LifeAfter or specific) -->
            <div id="robloxJokiPaymentMethods" class="mt-6 p-4 bg-[#1f1f3a] rounded-lg border border-[#4a4a6a]">
                <h5 class="text-xl font-bold text-white mb-3 flex items-center space-x-2">
                  <i class="fas fa-wallet text-green-400"></i>
                  <span>Metode Pembayaran</span>
                </h5>
                <ul class="space-y-2 text-gray-300">
                  <li class="flex items-center space-x-2">
                    <i class="fas fa-money-bill-wave text-green-400"></i>
                    <span>DANA: <span class="font-semibold">089634568406</span></span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <i class="fas fa-money-bill-wave text-green-400"></i>
                    <span>Gopay: <span class="font-semibold">089634568406</span></span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <i class="fas fa-money-bill-wave text-green-400"></i>
                    <span>OVO: <span class="font-semibold">089634568406</span></span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <i class="fas fa-university text-blue-400"></i>
                    <span>BRI: <span class="font-semibold">079801006323504</span></span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <i class="fas fa-university text-blue-400"></i>
                    <span>BCA: <span class="font-semibold">4460995146</span></span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <i class="fas fa-hand-holding-heart text-red-400"></i>
                    <span>Trakteer: <a href="https://trakteer.id/itshiro16/tip" target="_blank" class="text-red-400 hover:underline font-semibold">trakteer.id/itshiro16/tip</a></span>
                  </li>
                  <li class="flex items-center space-x-2">
                    <i class="fas fa-hand-holding-usd text-yellow-400"></i>
                    <span>Saweria: <a href="https://saweria.co/mizukikun" target="_blank" class="text-yellow-400 hover:underline font-semibold">saweria.co/mizukikun</a></span>
                  </li>
                </ul>
                <p class="text-sm text-gray-500 mt-3">Mohon lakukan pembayaran sebelum mengunggah bukti pembayaran.</p>
              </div>
        </div>

        <div>
          <label for="device" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
            <i class="fas fa-mobile-alt text-[#e94560]"></i>
            <span>Platform Device</span>
          </label>
          <select id="device" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" required>
            <option value="android">Android</option>
            <option value="ios">iOS</option>
            <option value="pc">PC / Emulator</option>
          </select>
        </div>
        <!-- Transfer Code and Password are for LifeAfter, hidden for Roblox -->
        <div id="lifeAfterCredentials">
            <div>
              <label for="code" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
                <i class="fas fa-key text-[#e94560]"></i>
                <span>Transfer Code Akun</span>
              </label>
              <input type="text" id="code" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" placeholder="Masukkan transfer code akun Anda">
            </div>
            <div>
              <label for="pass" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
                <i class="fas fa-lock text-[#e94560]"></i>
                <span>Password Akun</span>
              </label>
              <input type="password" id="pass" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" placeholder="Masukkan password akun Anda">
            </div>
        </div>
        <div>
          <label for="whatsapp" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
            <i class="fab fa-whatsapp text-[#e94560]"></i>
            <span>Nomor WhatsApp (Cth: 6281234567890)</span>
          </label>
          <input type="tel" id="whatsapp" class="w-full p-3 rounded-lg focus:outline-none transition-all duration-200" required placeholder="Nomor WhatsApp aktif Anda (tanpa +)">
          <p class="text-xs text-gray-500 mt-1">Kami akan menghubungi Anda melalui nomor ini untuk update joki.</p>
        </div>
        <!-- Tambahkan ID pada div ini -->
        <div id="proofOfPaymentDiv">
          <label for="proof" class="block text-sm font-medium mb-2 flex items-center space-x-2 text-gray-300">
            <i class="fas fa-image text-[#e94560]"></i>
            <span>Bukti Pembayaran (Screenshot)</span>
          </label>
          <input type="file" id="proof" accept="image/*" class="w-full p-3 rounded-lg focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[#e94560] file:text-white hover:file:bg-[#ff6b6b] transition-all duration-200" onchange="previewProof(event)">
          <div id="proofPreview" class="mt-4 flex justify-center"></div>
        </div>
        <div class="flex items-center space-x-3 p-4 card rounded-lg">
          <input type="checkbox" id="agree" class="w-5 h-5 rounded checkbox focus:ring-offset-2 focus:ring-offset-[#1a1a2e]">
          <label for="agree" class="text-sm text-gray-300">Saya sudah membaca dan menyetujui <a href="#rules" class="text-[#e94560] underline hover:text-[#ff6b6b] transition-colors duration-200">rules</a> yang berlaku</label>
        </div>
        <button type="submit" class="btn-primary w-full text-white px-6 py-3 rounded-lg font-bold text-lg">
          <i class="fas fa-paper-plane mr-2"></i>Kirim Order
        </button>
      </form>
    </section>

    <!-- Informasi & Rules -->
    <section id="rules" class="max-w-4xl mx-auto mt-12">
      <h3 class="text-2xl md:text-4xl font-bold mb-8 text-center text-[#e94560] flex items-center justify-center space-x-3">
        <i class="fas fa-info-circle"></i>
        <span>Informasi & Aturan Jasa Joki</span>
      </h3>
      <div class="card p-8 rounded-xl">
        <h4 class="text-xl font-bold mb-4 text-white">Informasi Penting:</h4>
        <ul class="space-y-4 text-gray-300 list-disc pl-5 mb-8">
          <li class="flex items-start space-x-3">
            <i class="fas fa-check-circle text-green-400 mt-1"></i>
            <div>
              <b>Death High Full Service</b> – Pengerjaan 1 bulan penuh. Harga <span class="font-bold text-yellow-300">Rp 150.000</span> untuk order pertama kali. Harga normal <span class="font-bold text-yellow-300">Rp 250.000</span> untuk order selanjutnya.
            </div>
          </li>
          <li class="flex items-start space-x-3">
            <i class="fas fa-check-circle text-green-400 mt-1"></i>
            <div>
              <b>Death High Per Floor</b> – Harga fleksibel, konfirmasi via WhatsApp: <a href="https://wa.me/6289634568406" class="text-green-400 underline font-semibold hover:text-green-300 transition-colors duration-200">0896-3456-8406</a>
            </div>
          </li>
          <li class="flex items-start space-x-3">
            <i class="fas fa-check-circle text-green-400 mt-1"></i>
            <div>
              <b>Joki Gendong Naik Gunung Roblox</b> – Harga <span class="font-bold text-yellow-300">Rp 5.000</span> per gunung.
            </div>
          </li>
          <li class="flex items-start space-x-3">
            <i class="fas fa-clock text-blue-400 mt-1"></i>
            <span>Estimasi pengerjaan sesuai antrian dan kesepakatan. Kami akan memberikan update secara berkala.</span>
          </li>
          <li class="flex items-start space-x-3">
            <i class="fas fa-shield-alt text-purple-400 mt-1"></i>
            <span>Data akun Anda dijamin aman & tidak akan disalahgunakan. Keamanan adalah prioritas kami.</span>
          </li>
        </ul>

        <h4 class="text-xl font-bold mb-4 text-white">Aturan Jasa Joki:</h4>
        <ol class="list-decimal pl-8 space-y-3 text-gray-300">
          <li>Akun wajib memiliki Transfer Code & Password yang valid dan benar (untuk LifeAfter).</li>
          <li>Untuk Roblox, pastikan username dan akses yang diberikan benar.</li>
          <li>Dilarang login ke akun selama proses joki berlangsung untuk menghindari konflik dan error.</li>
          <li>Pembayaran dilakukan <b>sebelum pengerjaan dimulai</b> (untuk Full Service dan Joki Roblox).</li>
          <li>Harap upload bukti screenshot pembayaran yang jelas.</li>
          <li>Progress update akan diberikan secara rutin (screenshot / video via WhatsApp) sesuai permintaan.</li>
          <li>Durasi pengerjaan bisa diperpanjang jika ada gangguan server, maintenance game, atau kendala teknis lainnya.</li>
          <li>Refund hanya berlaku jika pengerjaan belum dimulai dan ada kesepakatan.</li>
          <li>Dengan melakukan order, Anda dianggap telah membaca dan menyetujui semua aturan yang berlaku.</li>
        </ol>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="text-center p-6 mt-12 text-gray-500 border-t-2 border-[#2e2e4a] bg-[#1a1a2e]">
    <p>© 2025 Mizuki Hiroshi Ch. | Joki LifeAfter Pro | <a href="https://wa.me/6289634568406" class="text-green-400 underline hover:text-green-300 transition-colors duration-200">Kontak Kami</a></p>
  </footer>
</body>
</html>
